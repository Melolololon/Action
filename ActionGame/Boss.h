#pragma once
#include"GameObject.h"

#include<FrameTimer.h>

#include"Player.h"

class Boss:public MelLib::GameObject
{
private:
	static Player* pPlayer;

	// 移動や攻撃を制御するタイマー。例　遠くにいる時、このタイマーの時間に応じて移動するか遠距離攻撃するかを決める
	MelLib::FrameTimer actionTimer;
	
	enum class ThisState 
	{
		BATTLE,
		OTHER
	};
	ThisState thisState = ThisState::OTHER;

	MelLib::Vector3 direction; 
	int jumpAttackCount = 0;
	static const int JUMP_ATTACK_MAX_COUNT = 8;
	MelLib::FrameTimer jumpAttackTimer;

	enum class CurrentAttack 
	{
		NONE,
		JUMP,
	};
	CurrentAttack currentAttack = CurrentAttack::NONE;

	
	void AttackUpdate();
	// 攻撃一覧
	void JumpAttack();

public:


	static void LoadResources();
	static void SetPlayer();

	Boss();

	std::shared_ptr<MelLib::GameObject> GetNewPtr()override;
	void Initialize()override;
	void Update()override;
	void Draw()override;
	void Hit
	(
		const GameObject&  object,
		const MelLib::ShapeType3D collisionType,
		const std::string& shapeName,
		const MelLib::ShapeType3D hitObjColType,
		const std::string& hitShapeName
	)override;


	/// <summary>
	/// 攻撃
	/// </summary>
	void Attack();

	void Move();


};

